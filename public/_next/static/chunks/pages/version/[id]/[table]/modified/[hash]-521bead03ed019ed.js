(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{5790:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version/[id]/[table]/modified/[hash]",function(){return __webpack_require__(8703)}])},3264:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{VB:function(){return getBungieImageURL},ZP:function(){return BungieImage}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7458),process=__webpack_require__(3656);let imageProxyPrefix=process.env.NEXT_PUBLIC_IMAGE_PROXY;function getBungieImageURL(src){return src.startsWith("http")?src:"https://www.bungie.net".concat(src)}function BungieImage(param){let{src,...rest}=param;if(!src)return null;let bungieUrl=getBungieImageURL(src||"/img/misc/missing_icon_d2.png");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{loading:"lazy",src:imageProxyPrefix?imageProxyPrefix+bungieUrl:bungieUrl,...rest})}},4485:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{J0:function(){return castDefinitionsTable},cO:function(){return friendlyTableName},Eb:function(){return getDescription},Gf:function(){return getDisplayName},zW:function(){return getIconSrc},Dw:function(){return notEmpty}});var tableNameMappings_namespaceObject=JSON.parse('{"DestinyMedalTierDefinition":"MedalTiers","DestinyHistoricalStatsDefinition":"HistoricalStats","DestinyReportReasonCategoryDefinition":"ReportReasonCategories","DestinyUnlockDefinition":"Unlocks","DestinyMilestoneDefinition":"Milestones","DestinyRaceDefinition":"Races","DestinyChecklistDefinition":"Checklists","DestinyEventCardDefinition":"EventCards","DestinySeasonPassDefinition":"SeasonPasses","DestinySeasonDefinition":"Seasons","DestinyBreakerTypeDefinition":"BreakerTypes","DestinyItemCategoryDefinition":"ItemCategories","DestinyTalentGridDefinition":"Talents","DestinyPlugSetDefinition":"PlugSets","DestinyEnergyTypeDefinition":"EnergyTypes","DestinyMetricDefinition":"Metrics","DestinyLoreDefinition":"Lore","DestinyRecordDefinition":"Triumphs","DestinyCollectibleDefinition":"Collectibles","DestinyPresentationNodeDefinition":"PresentationNodes","DestinyTraitCategoryDefinition":"TraitCategories","DestinyTraitDefinition":"Traits","DestinyRewardSourceDefinition":"RewardSources","DestinyProgressionLevelRequirementDefinition":"ProgressionLevelRequirements","DestinyPowerCapDefinition":"PowerCaps","DestinyArtifactDefinition":"Artifacts","DestinySandboxPatternDefinition":"SandboxPatterns","DestinyFactionDefinition":"Factions","DestinyVendorGroupDefinition":"VendorGroups","DestinyActivityTypeDefinition":"ActivityTypes","DestinyPlaceDefinition":"Places","DestinyActivityModeDefinition":"ActivityModes","DestinyLocationDefinition":"Locations","DestinyDamageTypeDefinition":"DamageTypes","DestinySandboxPerkDefinition":"SandboxPerks","DestinyObjectiveDefinition":"Objectives","DestinyActivityModifierDefinition":"ActivityModifiers","DestinyActivityDefinition":"Activities","DestinyActivityGraphDefinition":"ActivityGraphs","DestinyDestinationDefinition":"Destinations","DestinyVendorDefinition":"Vendors","DestinyGenderDefinition":"Genders","DestinyClassDefinition":"Classes","DestinyEquipmentSlotDefinition":"EquipmentSlots","DestinyStatGroupDefinition":"StatGroups","DestinyStatDefinition":"Stats","DestinyItemTierTypeDefinition":"ItemTierTypes","DestinyInventoryBucketDefinition":"InventoryBuckets","DestinyMaterialRequirementSetDefinition":"MaterialRequirementSets","DestinySocketCategoryDefinition":"SocketCategories","DestinySocketTypeDefinition":"SocketTypes","DestinyInventoryItemDefinition":"Items","DestinyProgressionDefinition":"Progressions"}');function friendlyTableName(name){let useMobileName=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(useMobileName&&tableNameMappings_namespaceObject[name])return tableNameMappings_namespaceObject[name];let match=name.match(/Destiny(\w+)Definition/);return match?match[1]:name}function castDefinitionsTable(castToTableName,inputTableName,defs){if(inputTableName!==castToTableName)throw Error("Unable to cast ".concat(inputTableName," to ").concat(castToTableName));return defs}function hasDisplayProperties(def){return"displayProperties"in def&&void 0!==def.displayProperties}function getDisplayName(def){return def?859929450===def.hash?"Unyielding Casque":hasDisplayProperties(def)&&"name"in def.displayProperties&&def.displayProperties.name?def.displayProperties.name:"name"in def&&def.name?def.name:void 0:void 0}function getIconSrc(def){return def?hasDisplayProperties(def)&&"icon"in def.displayProperties&&def.displayProperties.icon?def.displayProperties.icon:"iconImagePath"in def&&def.iconImagePath?def.iconImagePath:"colorImagePath"in def&&def.colorImagePath?def.colorImagePath:void 0:void 0}function getDescription(def){if(def&&hasDisplayProperties(def)&&"description"in def.displayProperties&&def.displayProperties.description)return def.displayProperties.description}function notEmpty(value){return null!=value}},8703:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__N_SSG:function(){return __N_SSG},default:function(){return _hash_}});var TruncationDirection,TruncationDirection1,jsx_runtime=__webpack_require__(7458),react=__webpack_require__(2983),utils=__webpack_require__(4485),styles_module=__webpack_require__(2466),styles_module_default=__webpack_require__.n(styles_module),BungieImage=__webpack_require__(3264),diff_match_patch=__webpack_require__(6548),truncate_styles_module=__webpack_require__(7452),truncate_styles_module_default=__webpack_require__.n(truncate_styles_module);function countLines(text){var ref;return(null!==(ref=text.match(/\n/g))&&void 0!==ref?ref:[]).length}function Truncate(param){let{direction:dir,text}=param,[toggledFull,setToggledFull]=(0,react.useState)(!1),lineCount=(0,react.useMemo)(()=>{var ref;return(null!==(ref=text.match(/\n/g))&&void 0!==ref?ref:[]).length},[text]),truncationLimit=dir===TruncationDirection1.Mid?7:4,showFull=toggledFull||lineCount<truncationLimit,lastThreeLines=(0,react.useMemo)(()=>{if(!showFull)return function(str){let amount=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,foundIndex=0,indexCounter=0;for(let index=str.length-1;index>=0;index--){let letter=str[index];if("\n"===letter&&(indexCounter+=1),indexCounter>amount){foundIndex=index+1;break}}return str.slice(foundIndex)}(text,3)},[showFull,text]),firstThreeLines=(0,react.useMemo)(()=>{if(!showFull)return function(str){let amount=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,foundIndex=0,indexCounter=0;for(let index=0;index<str.length;index++){let letter=str[index];if("\n"===letter&&(indexCounter+=1),indexCounter>=amount){foundIndex=index;break}}return str.slice(0,foundIndex)}(text,3)},[showFull,text]),truncatedLineCount=(0,react.useMemo)(()=>{let lastThreeLinesCount=lastThreeLines?countLines(lastThreeLines):0,firstThreeLinesCount=firstThreeLines?countLines(firstThreeLines):0;return lineCount-lastThreeLinesCount-firstThreeLinesCount},[]);if(showFull)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:text});let toggleButton=(0,jsx_runtime.jsxs)("button",{className:truncate_styles_module_default().button,onClick:()=>setToggledFull(!0),children:["Expand ",truncatedLineCount," lines..."]});return dir===TruncationDirection1.Leading?(0,jsx_runtime.jsxs)("span",{children:[toggleButton,(0,jsx_runtime.jsx)("br",{}),lastThreeLines]}):dir===TruncationDirection1.Trailing?(0,jsx_runtime.jsxs)("span",{children:[firstThreeLines,(0,jsx_runtime.jsx)("br",{}),toggleButton]}):dir===TruncationDirection1.Mid?(0,jsx_runtime.jsxs)("span",{children:[firstThreeLines,(0,jsx_runtime.jsx)("br",{}),toggleButton,(0,jsx_runtime.jsx)("br",{}),lastThreeLines]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}function CustomDiffView(param){let{oldJSON,newJSON}=param,diff=(0,react.useMemo)(()=>{let dmp=new diff_match_patch.diff_match_patch;dmp.Diff_Timeout=10;let diffs=function(dmp,text1,text2){let a=dmp.diff_linesToChars_(text1,text2),lineText1=a.chars1,lineText2=a.chars2,lineArray=a.lineArray,diffs=dmp.diff_main(lineText1,lineText2,!1);return dmp.diff_charsToLines_(diffs,lineArray),diffs}(dmp,oldJSON,newJSON),summarizedDiff=[];for(let index=0;index<diffs.length;index++){let truncationDirection;let[changeType,text]=diffs[index];if(changeType===diff_match_patch.DIFF_INSERT||changeType===diff_match_patch.DIFF_DELETE){summarizedDiff.push([changeType,text]);continue}truncationDirection=0===index?TruncationDirection1.Leading:index===diffs.length-1?TruncationDirection1.Trailing:TruncationDirection1.Mid,summarizedDiff.push([changeType,(0,jsx_runtime.jsx)(Truncate,{direction:truncationDirection,text:text})])}return summarizedDiff},[oldJSON,newJSON]);return(0,jsx_runtime.jsx)("div",{style:{fontFamily:"monospace",whiteSpace:"pre"},children:diff.map((param,index)=>{let[op,data]=param;return op===diff_match_patch.DIFF_INSERT?(0,jsx_runtime.jsx)("span",{style:{background:"#27ae60c0"},children:data},index):op===diff_match_patch.DIFF_DELETE?(0,jsx_runtime.jsx)("span",{style:{background:"#e74c3cc0"},children:data},index):777===op?(0,jsx_runtime.jsx)("span",{style:{opacity:.75,background:"#FFFFFF51"},children:data},index):(0,jsx_runtime.jsx)("span",{children:data},index)})})}(TruncationDirection=TruncationDirection1||(TruncationDirection1={}))[TruncationDirection.Leading=0]="Leading",TruncationDirection[TruncationDirection.Mid=1]="Mid",TruncationDirection[TruncationDirection.Trailing=2]="Trailing";var lib=__webpack_require__(4325),lib_default=__webpack_require__.n(lib);function WrappedReactDiffViewer(param){let{oldJSON,newJSON}=param;return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(lib_default(),{leftTitle:"Before",rightTitle:"Now",oldValue:oldJSON,newValue:newJSON,splitView:!0,compareMethod:lib.DiffMethod.WORDS,useDarkTheme:!0,styles:{variables:{dark:{diffViewerTitleColor:"white"}},codeFold:{a:{textDecoration:"none !important","&:hover":{textDecoration:"underline !important"}}}}})})}function JSONDiff(param){let{oldObject,newObject}=param,{oldJSON,newJSON,useCustomDiff}=(0,react.useMemo)(()=>{let oldJSON=JSON.stringify(oldObject,null,2),newJSON=JSON.stringify(newObject,null,2),useCustomDiff=oldJSON.length>5e4||newJSON.length>5e4;return{oldJSON,newJSON,useCustomDiff}},[]);return useCustomDiff?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)("em",{children:"This definition is very large, so to not crash your browser it uses an alternate diff view"})}),(0,jsx_runtime.jsx)(CustomDiffView,{oldJSON:oldJSON,newJSON:newJSON})]}):(0,jsx_runtime.jsx)(WrappedReactDiffViewer,{oldJSON:oldJSON,newJSON:newJSON})}let ModifiedDiffPage=param=>{let{hash,definition,previousDefinition}=param,[isClient,setIsClient]=(0,react.useState)(!1);(0,react.useEffect)(()=>{setIsClient(!0)},[]);let header=(0,jsx_runtime.jsxs)("h2",{children:[definition?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(BungieImage.ZP,{className:styles_module_default().icon,src:(0,utils.zW)(definition)}),'"',(0,utils.Gf)(definition),'"']}):hash," ","diff"]});return isClient?(0,jsx_runtime.jsxs)("div",{className:styles_module_default().root,children:[header,(0,jsx_runtime.jsx)(JSONDiff,{newObject:definition,oldObject:previousDefinition})]}):(0,jsx_runtime.jsxs)("div",{className:styles_module_default().root,children:[header," ",(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)("em",{children:"Loading..."})})]})};var __N_SSG=!0,_hash_=ModifiedDiffPage},7452:function(module){module.exports={button:"truncate_styles_button__ySBik"}},2466:function(module){module.exports={root:"styles_root___DG2b",icon:"styles_icon__rdote"}}},function(__webpack_require__){__webpack_require__.O(0,[18,774,888,179],function(){return __webpack_require__(__webpack_require__.s=5790)}),_N_E=__webpack_require__.O()}]);